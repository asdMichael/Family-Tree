<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Michael's Family — Tree & Timeline</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- TOP TABS -->
  <div class="top-tabs" role="tablist" aria-label="View toggle">
    <button id="tabTree" class="active" aria-controls="treePage" aria-selected="true">Family Tree</button>
    <button id="tabTimeline" aria-controls="timelinePage" aria-selected="false">Family Timeline</button>
  </div>

  <header class="page-header">
    <h1>Michael's Family — Tree & Timeline</h1>
    <p class="lead">Two views: the family tree and a horizontal timeline of births. Click any portrait, marker, or card to read the full family story.</p>
  </header>

  <!-- ====================== TREE PAGE ====================== -->
  <main id="treePage" class="tree-container" style="display:block;">
    <section class="family-tree">
      <ul>
        <!-- Left cluster (Vaccaro) -->
        <li>
          <div class="node">
            <div class="couple-inline">
              <div class="node small" onclick="openStory('james_vaccaro')" title="James Vaccaro">
                <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                <div class="label">James Vaccaro</div>
                <div class="sub">1913–1985</div>
              </div>

              <div class="node small" onclick="openStory('rose_kirila')" title="Rose Louise Kirila">
                <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                <div class="label">Rose Louise Kirila</div>
                <div class="sub">Hungarian → Ohio</div>
              </div>
            </div>

            <ul>
              <li>
                <div class="node small" onclick="openStory('deborah')" title="Deborah Patton">
                  <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                  <div class="label">Deborah (Vaccaro)</div>
                  <div class="sub">b. 1959</div>
                </div>

                <ul>
                  <li>
                    <div class="node small" onclick="openStory('daniel')" title="Daniel Patton">
                      <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                      <div class="label">Daniel Patton</div>
                      <div class="sub">b. 1992</div>
                    </div>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </li>

        <!-- Middle cluster (Patton / Fisher) -->
        <li>
          <div class="node">
            <div class="couple-inline">
              <div class="node small" onclick="openStory('william_patton')" title="William Patton">
                <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                <div class="label">William Patton</div>
                <div class="sub">Northern Ireland</div>
              </div>

              <div class="node small" onclick="openStory('beatrice_fisher')" title="Beatrice Fisher">
                <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                <div class="label">Beatrice Fisher</div>
                <div class="sub">Fisher / Crozier</div>
              </div>
            </div>

            <ul>
              <li>
                <div class="node small" onclick="openStory('lynne')" title="Lynne Patton">
                  <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                  <div class="label">Lynne Patton</div>
                  <div class="sub">Sister of Gary</div>
                </div>
              </li>

              <li>
                <div class="node small" onclick="openStory('gary')" title="Gary Patton">
                  <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                  <div class="label">Gary Patton</div>
                  <div class="sub">b. 1956 — Belfast</div>
                </div>

                <ul>
                  <li>
                    <div class="node" style="padding-top:28px;">
                      <div class="couple-inline">
                        <div class="node small" onclick="openStory('deborah')">
                          <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                          <div class="label">Deborah Patton</div>
                          <div class="sub">b. 1959</div>
                        </div>

                        <div class="node small" onclick="openStory('gary')">
                          <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                          <div class="label">Gary Patton</div>
                          <div class="sub">Belfast → California</div>
                        </div>
                      </div>

                      <ul>
                        <li>
                          <div class="node small" onclick="openStory('shannen')" title="Shannen Patton">
                            <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                            <div class="label">Shannen Patton</div>
                            <div class="sub">b. 1987</div>
                          </div>

                          <ul>
                            <li>
                              <div class="node" style="padding-top:28px;">
                                <div class="couple-inline">
                                  <div class="node small" onclick="openStory('brian')" title="Brian Kupfer">
                                    <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                                    <div class="label">Brian Kupfer</div>
                                    <div class="sub">b. 1981</div>
                                  </div>

                                  <div class="node small" onclick="openStory('shannen')" title="Shannen Patton">
                                    <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                                    <div class="label">Shannen Patton</div>
                                    <div class="sub">m. 2020</div>
                                  </div>
                                </div>

                                <ul>
                                  <li>
                                    <div class="node small" onclick="openStory('michael')" title="Michael Dean">
                                      <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                                      <div class="label">Michael Dean</div>
                                      <div class="sub">b. Dec 10 / 2008</div>
                                    </div>

                                    <ul>
                                      <li>
                                        <div class="node small" onclick="openStory('breanna')" title="Breanna Kupfer">
                                          <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                                          <div class="label">Breanna Kupfer</div>
                                          <div class="sub">b. 10 Nov 2021</div>
                                        </div>
                                      </li>
                                      <li>
                                        <div class="node small" onclick="openStory('alexis')" title="Alexis Kupfer">
                                          <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                                          <div class="label">Alexis Kupfer</div>
                                          <div class="sub">b. 8 Jun 2016</div>
                                        </div>
                                      </li>
                                    </ul>
                                  </li>
                                </ul>

                              </div>
                            </li>
                          </ul>

                        </li>
                      </ul>
                    </div>
                  </li>

                </ul>
              </li>
            </ul>
          </div>
        </li>

        <!-- Right cluster (Kirili / others) -->
        <li>
          <div class="node">
            <div class="couple-inline">
              <div class="node small" onclick="openStory('eugene')">
                <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                <div class="label">Eugene Kirili</div>
                <div class="sub">1936–1994</div>
              </div>

              <div class="node small" onclick="openStory('ruth_barris')">
                <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                <div class="label">Ruth Barris</div>
                <div class="sub">b. 1939</div>
              </div>
            </div>

            <ul>
              <li>
                <div class="node small" onclick="openStory('fisher_note')">
                  <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                  <div class="label">Fisher / Crozier notes</div>
                  <div class="sub">name variants</div>
                </div>
              </li>
            </ul>
          </div>
        </li>

        <!-- Kupfer root -->
        <li style="margin-top:18px;">
          <div class="node">
            <div class="couple-inline">
              <div class="node small" onclick="openStory('robert_kupfer')">
                <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                <div class="label">Robert Kupfer</div>
                <div class="sub">Kupfer root</div>
              </div>

              <div class="node small" onclick="openStory('patricia_kupfer')">
                <img class="placeholder" src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt="">
                <div class="label">Patricia Kupfer</div>
                <div class="sub"></div>
              </div>
            </div>

            <ul>
              <li><div class="node small" onclick="openStory('cort')"><img class="placeholder' src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt=""><div class="label">Cort Kupfer</div></div></li>
              <li><div class="node small" onclick="openStory('brian')"><img class="placeholder' src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt=""><div class="label">Brian Kupfer</div></div></li>
              <li><div class="node small" onclick="openStory('crystal')"><img class="placeholder' src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill="%23cbd5e1"/></svg>' alt=""><div class="label">Crystal Kupfer</div></div></li>
              <li><div class="node small" onclick="openStory('april')"><img class="placeholder' src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23f3f6fb"/><circle cx="64" cy="64" r="56" fill='%23cbd5e1'/></svg>' alt=""><div class="label">April Kupfer</div></div></li>
              <li><div class="node small" onclick="openStory('everett')"><img class="placeholder' src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill='%23f3f6fb'/><circle cx='64' cy='64' r='56' fill='%23cbd5e1'/></svg>' alt=""><div class="label">Everett Kupfer</div></div></li>
              <li><div class="node small" onclick="openStory('jonathan')"><img class="placeholder' src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill='%23f3f6fb'/><circle cx='64' cy='64' r='56' fill='%23cbd5e1'/></svg>' alt=""><div class="label">Jonathan Kupfer</div></div></li>
            </ul>
          </div>
        </li>

        <!-- Dean cluster -->
        <li style="margin-top:18px;">
          <div class="node">
            <div class="couple-inline">
              <div class="node small" onclick="openStory('nannete')">
                <img class="placeholder' src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill='%23f3f6fb'/><circle cx='64' cy='64' r='56' fill='%23cbd5e1'/></svg>' alt="">
                <div class="label">Nannete Dean</div>
                <div class="sub">Aunt</div>
              </div>
            </div>

            <ul>
              <li><div class="node small" onclick="openStory('mario')"><img class="placeholder' src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill='%23f3f6fb'/><circle cx='64' cy='64' r='56' fill='%23cbd5e1'/></svg>' alt=""><div class="label">Mario Dean</div></div></li>
              <li><div class="node small" onclick="openStory('carlo')"><img class="placeholder' src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill='%23f3f6fb'/><circle cx='64' cy='64' r='56' fill='%23cbd5e1'/></svg>' alt=""><div class="label">Carlo Dean</div></div></li>
              <li><div class="node small" onclick="openStory('renato')"><img class="placeholder' src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill='%23f3f6fb'/><circle cx='64' cy='64' r='56' fill='%23cbd5e1'/></svg>' alt=""><div class="label">Renato Dean</div></div></li>
              <li><div class="node small" onclick="openStory('demarco')"><img class="placeholder' src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill='%23f3f6fb'/><circle cx='64' cy='64' r='56' fill='%23cbd5e1'/></svg>' alt=""><div class="label">Demarco Victoria</div></div></li>
              <li><div class="node small" onclick="openStory('gino')"><img class="placeholder' src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill='%23f3f6fb'/><circle cx='64' cy='64' r='56' fill='%23cbd5e1'/></svg>' alt=""><div class="label">Gino Dean</div></div></li>
              <li><div class="node small" onclick="openStory('giana')"><img class="placeholder' src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill='%23f3f6fb'/><circle cx='64' cy='64' r='56' fill='%23cbd5e1'/></svg>' alt=""><div class="label">Giana Dean</div></div></li>
              <li><div class="node small" onclick="openStory('demetri')"><img class="placeholder' src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill='%23f3f6fb'/><circle cx='64' cy='64' r='56' fill='%23cbd5e1'/></svg>' alt=""><div class="label">Demetri Dean</div></div></li>
            </ul>
          </div>
        </li>

      </ul>
    </section>
  </main>

  <!-- ====================== TIMELINE PAGE ====================== -->
  <main id="timelinePage" class="timeline-container" style="display:none;">
    <div class="timeline-header">
      <h2>Family Birth Timeline</h2>
      <p class="muted">Markers sit along a central line — click any dot to reveal a short card; click the card for the full story.</p>
    </div>

    <div class="timeline-line-wrap" id="timelineWrap" aria-hidden="false">
      <!-- the central horizontal line is drawn in CSS ::before -->
      <div class="timeline-track" id="timelineTrack" role="list" aria-label="Birth timeline">
        <!-- markers/cards are injected here by JS -->
      </div>
    </div>
  </main>

  <!-- STORY MODAL -->
  <div id="story-modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-card" role="document">
      <button id="closeModal" onclick="closeStory()" aria-label="Close story" class="close-btn">Close</button>
      <div id="story-content"></div>
    </div>
  </div>

  <script>
    /************************************************************************
     * Full biography object (warm & nostalgic, first-person perspective)
     * This includes every biography you provided earlier, expanded.
     ************************************************************************/
    const stories = {
      "james_vaccaro": {"title":"James Vaccaro (1913–1985)","photo":"","text":"James was born in Pennsylvania and grew up during hard times. He moved around, worked with his hands, and kept the family steady through war-time shortages and the slow rebuild afterward. In Ohio he became known for a steady work ethic — tending property, showing up early, and never shirking a responsibility. Later he moved west and lived out his years in California. Family stories remember him as quiet but strong: the person who fixed a broken truck at midnight or who could coax a stubborn mule with a look. I grew up on these stories like lullabies; even if I never met him, I feel his presence whenever someone in our family chooses care over convenience."},
      "rose_kirila": {"title":"Rose Louise Kirila","photo":"","text":"Rose was the bridge between Hungary and Ohio. She kept household rituals alive: festival foods, particular prayers, and a stubborn garden that fed a family through tight seasons. She could read the weather in the sky and the teeth of a plow. Everyone remembers her kitchen as the place where stories became recipes and where children learned to sit quietly while she kneaded dough and told a story about the old country. When I close my eyes I almost smell the dough she used to make — heavy and warm — and imagine the way she taught patience by turning flour into a meal."},
      "deborah": {"title":"Deborah (née Vaccaro) Patton (b. 1959)","photo":"","text":"Deborah’s childhood was threaded by the rhythms of Ohio farming life and Hungarian customs. She remembers waking before dawn to help with chores, the feel of cold soil, and neighbors who shared both work and stories. Later she moved west and married Gary, bringing the old recipes and a quiet, organizing strength to a new household. Deborah’s presence is remembered in the small domestic details — a carefully folded napkin, a meal that can soothe, and the way she keeps family birthdays on a calendar in her head. To me, Deborah is the person who holds a family’s emotional map; she remembers who needs a call and who needs soup when things go wrong."},
      "william_patton": {"title":"William Patton","photo":"","text":"William carried Northern Ireland with him in the way he spoke about saints, the cadence of old sermons, and the quiet manner he brought into noisy American rooms. He raised his children with clear rules and a wry sense of humor that showed up at table. Family lore credits him for teaching patience — the value of waiting and working — and for passing down small talismans, like a worn pocket prayer-book or a chipped china cup, that became family heirlooms. I picture William in the evenings, hands folded, telling a story that made everyone quiet — not because he needed silence, but because his words deserved to be heard."},
      "beatrice_fisher": {"title":"Beatrice Fisher (Crozier connection)","photo":"","text":"Beatrice’s memory is a tapestry of faith, resilience, and a practical tenderness. The Crozier line shows up in old photographs: crisp collars, careful hair, and that quiet pride in being able to make a home out of scarce things. Beatrice taught younger family members how to keep a house that smelled welcome and how to read a recipe as a kind of language worth preserving. As I tell the story, she is the keeper of small rituals that ripple across generations: a tea set, a folded letter, a recipe scrawled on the back of an envelope."},
      "lynne": {"title":"Lynne Patton","photo":"","text":"Lynne is remembered as a steady presence in the Patton family — the aunt who attended every school event and who kept long-running joke threads alive at family parties. Though records are thin, the stories that survive paint her as warm, practical, and the kind of person who could organize a reunion with calm efficiency. In the stories I tell children now, Lynne is the one who shows up with extra chairs and a weary smile; she makes the mechanics of family look easy when they’re anything but."},
      "gary": {"title":"Gary Patton (b. 1956)","photo":"","text":"Gary was born in Belfast into a household where religion and ritual structured daily life. He later moved to California and, like many immigrants, learned to translate old habits into new rhythms. Gary married Deborah in 1984 and built a family that balanced strict expectations with a deep loyalty. He tells stories about Ireland — about fields, stubborn weather, and the odd comfort of a well-steeped cup of tea — and his children remember him as a man who blended sternness with sudden, small acts of generosity: a fixed bike, an unexpected cake, a private grin at a family joke. To us he is both disciplinarian and soft-hearted keeper of tales."},
      "daniel": {"title":"Daniel Patton (b. 1992)","photo":"","text":"Daniel grew up in Woodland Hills and represents a generational shift: more rooted in California life than in the old stories, but still attentive to them. Friends remember him as easygoing, quick with a grin, and practical: the person who can turn a spare part into a working lamp and who still shows up for family dinners when they matter most. I like telling the younger ones about Daniel as the cousin who can make things work; his calm competence is a kind of inherited gift."},
      "shannen": {"title":"Shannen Patton (b. 1987)","photo":"","text":"Born in Woodland Hills, Shannen grew up balancing Patton tradition and the pull of California life. She cherishes small rituals: family recipes from Ohio, holiday gatherings, and the habit of calling relatives on birthdays. Married to Brian, she keeps the household running and the family calendar full. In my memory she is the silent engine — the one who remembers the plates, the songs, and the jokes that make us all feel like we belong."},
      "brian": {"title":"Brian Kupfer (b. 1981)","photo":"","text":"Brian is the kind of practical teacher people remember — patient when explaining a difficult technique, quick to laugh when something goes wrong, and serious when it comes to his responsibilities. He trained people in trades, worked in plastic tooling for Lockheed, and even coached in Ireland for a spell. He married Shannen in 2020 and speaks fondly of ordinary domestic moments: a Saturday project in the garage, late-night pancakes, and quiet conversations about the future. People describe him as reliable and unexpectedly tender. He is the kind of man who builds family not with grand speeches but with steady hands and late-night jokes."},
      "breanna": {"title":"Breanna Kupfer (b. 2021)","photo":"","text":"Breanna arrived to a household full of laughter and careful routines. Even as a toddler she carried a clear, curious gaze and a willingness to test new textures — a trait that has everyone excited to watch her grow. In family photos she is small and serious in a way that feels wise beyond her years, and already she seems to inherit the patient indulgence of the gathered adults."},
      "alexis": {"title":"Alexis Kupfer (b. 2016)","photo":"","text":"Alexis brings an early affection for storytelling and small, determined independence. From school projects to backyard games, she’s remembered as the kid who will quietly organize a group and make sure everyone has a turn. Watching her is like watching the next chapter of the family — a kid who will invent rituals of her own."},
      "robert_kupfer": {"title":"Robert Kupfer","photo":"","text":"Robert is the elder presence of the Kupfer side: a man who kept family links strong through phone calls, weekend gatherings, and quiet support. Workmanlike and direct, he valued steady employment and was proud when his children learned a trade. He taught that dignity is often practical: a steady job, a reliable handshake, and a family calendar that never loses a birthday."},
      "patricia_kupfer": {"title":"Patricia Kupfer","photo":"","text":"Patricia held the family together with small rituals: a shared holiday table, a tidy guest room, a telephone always ready for a check-in. She is remembered for practical kindness. She made the house a harbor — clothes folded, a kettle simmering, and a willingness to receive whoever turned up at the door."},
      "cort": {"title":"Cort Kupfer","photo":"","text":"Cort is known in family circles as someone who carries on the humor and directness of his parents. He is practical, quick with a story, and remembers neighborhood details that others forget. He keeps the more lighthearted chapters of our history alive with an easy grin and a ready tale."},
      "crystal": {"title":"Crystal Kupfer","photo":"","text":"Crystal is a mother first and foremost; stories about her often center on her son Elijah and small, fiercely protective instincts. She balances warmth with a clear determination to make sure her child has what he needs. When family troubles arise she is the one who organizes the logistics and shields the kids — the quiet hero of many nights."},
      "april": {"title":"April Kupfer","photo":"","text":"April’s life has had its complications — the strain of divorce and raising two children — but she is remembered for her toughness and resourcefulness. People tell stories of her finding ways through tight times and standing up for the kids, and there is respect in those tales. She is an example of grit that gets you through."},
      "everett": {"title":"Everett Kupfer","photo":"","text":"Everett served in the Air Force and carried those lessons of discipline and perspective into civilian life. He lives near Berkeley and is remembered for a calm steadiness. His military service shaped a steadiness in him that the family admires — a quietly reliable presence in the weather of everyday life."},
      "jonathan": {"title":"Jonathan Kupfer","photo":"","text":"Jonathan is a quieter member of the extended group — a step-uncle who keeps in touch and turns up to help when family plans require extra hands. His presence is often understated, but folks notice when he’s not around because he’s the one who quietly made sure something got done."},
      "nannete": {"title":"Nannete Dean","photo":"","text":"Nannete was raised partly in France and brought a worldly patience to family life. She is remembered for quiet generosity and for recipes that recall markets and fig trees. Her culinary stories always hinted at wider worlds — the comfort of a good stew and the warmth of a hand-knitted scarf. I remember thinking she made us feel cosmopolitan without leaving town."},
      "mario": {"title":"Mario Dean (1985–2014)","photo":"","text":"Mario’s life was short and intense — a figure who appears in family memory as both vulnerable and vivid. He died in 2014 but left behind stories and jokes that still surface at gatherings. People speak of Mario with affection and an ache; he was someone who lived loudly and left behind echoes that remind us to hold one another close."},
      "carlo": {"title":"Carlo Dean","photo":"","text":"Carlo’s story includes both complications and fierce family loyalty. He’s had legal troubles and been in and out of difficult circumstances, but also shows moments of tenderness and care during better times. For our family, Carlo is a reminder that people can be messy and brave at once."},
      "renato": {"title":"Renato Dean","photo":"","text":"Renato served nearly a decade in the military, and that discipline shaped his approach to family and work. He’s described as serious, capable, and private about his struggles. The family story about Renato is one of steady, careful competence — someone who takes vows seriously and brings that seriousness home."},
      "demarco": {"title":"Demarco Victoria","photo":"","text":"Demarco and his three children are part of the wider Dean network. Family memory locates them among the many small, ordinary stories of everyday care: playdates, birthday cakes, and small arguments that resolve over coffee. They anchor a lot of our Saturday afternoons."},
      "gino": {"title":"Gino Dean","photo":"","text":"Gino lives in San Diego and is described as friendly and practical. His daughter Taylor is a bright presence and family stories speak of beach days and backyard barbecues. Gino’s life in the sun feels like a lighter chapter in the family book."},
      "giana": {"title":"Giana Dean","photo":"","text":"Giana’s death by suicide is a deep wound in the family. Remembered with tenderness, her life prompts quiet conversations about mental health and care. We tell her story so that we might learn to hold one another more gently; her memory has become a quiet, serious plea for awareness and kindness."},
      "demetri": {"title":"Demetri Dean","photo":"","text":"Possibly a cousin — Demetri appears in family memory as someone who kept to himself but who mattered in small ways. People remember him for quiet acts: showing up, carrying groceries, being a steady neighbor when it mattered."},
      "eugene": {"title":"Eugene Edward Kirili (1936–1994)","photo":"","text":"Eugene’s life traces a path across Ohio and Pennsylvania. He married Ruth Barris in 1962 and raised a family in small towns. Family memories of Eugene are the sort that fill a porch: slow jokes, steady work, and a presence that kept community moving forward in small, important ways."},
      "ruth_barris": {"title":"Ruth Adaline Barris (b. 1939)","photo":"","text":"Ruth’s life is traced through small community ties — church groups, midday phone calls, and neighborly breakfasts. She and Eugene raised at least one daughter and kept close to the rhythms of Trumbull and West Middlesex. Her manner was kindly and neighborly; she smoothed edges and kept the family in contact."},
      "fisher_note": {"title":"Fisher / Crozier / Fischer notes","photo":"","text":"Some family lines use Fisher, some Fischer, and a Crozier appears in marriage records and oral recollections. These name-variants point to likely migrations and the way records sometimes split families across different spellings. In practical terms, it means our paper trail sometimes plays tricks on us — but the stories remain steady."},
      "michael": {"title":"Michael Dean (You)","photo":"","text":"Michael Dean — born December 10. The only one in the family with an Italian thread in name and story, Michael carries family traditions forward while making his own path. He remembers holidays, small pranks, and long car rides; he’s curious about family history and keeps a soft spot for the old recipes and the stories that are told around the table. If our family is a book, Michael is the next chapter, curious and hopeful and ready to write his own lines."}
    };

    /************************************************************************
     * TIMELINE data:
     * We'll order the timeline roughly by known birth years where available,
     * then append unspecified-year entries grouped by branches.
     ************************************************************************/
    const timelineData = [
      { key: 'james_vaccaro', year: 1913 },
      { key: 'rose_kirila', year: 1929 },
      { key: 'eugene', year: 1936 },
      { key: 'ruth_barris', year: 1939 },
      { key: 'william_patton', year: 1940 }, // estimated (no exact year)
      { key: 'beatrice_fisher', year: 1942 }, // estimated
      { key: 'robert_kupfer', year: 1945 }, // estimated
      { key: 'patricia_kupfer', year: 1947 }, // estimated
      { key: 'lynne', year: 1950 }, // estimated
      { key: 'gary', year: 1956 },
      { key: 'brian', year: 1981 },
      { key: 'mario', year: 1985 },
      { key: 'shannen', year: 1987 },
      { key: 'daniel', year: 1992 },
      { key: 'michael', year: 2008 },
      { key: 'alexis', year: 2016 },
      { key: 'breanna', year: 2021 },

      // Kupfer / Ojai cluster (unspecified — placed after 1940s)
      { key: 'cort', year: 1958 },
      { key: 'crystal', year: 1960 },
      { key: 'april', year: 1962 },
      { key: 'everett', year: 1965 },
      { key: 'jonathan', year: 1968 },

      // Dean cluster (estimates)
      { key: 'nannete', year: 1960 },
      { key: 'carlo', year: 1980 },
      { key: 'renato', year: 1979 },
      { key: 'demarco', year: 1978 },
      { key: 'gino', year: 1975 },
      { key: 'giana', year: 1989 },
      { key: 'demetri', year: 1990 },

      // Fisher/Crozier note
      { key: 'fisher_note', year: 1930 }
    ];

    // Ensure unique and presented in chronological order
    const sortedTimeline = timelineData.slice().sort((a,b)=> (a.year||9999)-(b.year||9999));

    /************************************************************************
     * Build the horizontal line + markers
     ************************************************************************/
    const track = document.getElementById('timelineTrack');

    // Create one marker for each timeline item, spaced evenly via flex
    sortedTimeline.forEach((item, idx) => {
      const story = stories[item.key] || { title: item.key, text: '' };

      // wrapper for marker + card
      const node = document.createElement('div');
      node.className = 'timeline-node';
      node.setAttribute('role','listitem');
      node.setAttribute('data-key', item.key);
      node.setAttribute('tabindex','0');

      // marker (dot on the line)
      const dot = document.createElement('button');
      dot.className = 'timeline-dot';
      dot.setAttribute('aria-label', `${story.title} (${item.year || 'year unknown'})`);
      dot.title = `${story.title} — ${item.year || 'Year unknown'}`;
      dot.addEventListener('click', (e)=> {
        e.stopPropagation();
        showCardAbove(node);
      });
      dot.addEventListener('keydown', (e)=> {
        if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); showCardAbove(node); }
      });

      // small label below the line
      const label = document.createElement('div');
      label.className = 'timeline-label';
      label.innerText = (item.year ? item.year : '');

      // card that appears above the line (preview)
      const card = document.createElement('div');
      card.className = 'timeline-card';
      const title = document.createElement('h3');
      title.innerText = story.title;
      const yearSpan = document.createElement('div');
      yearSpan.className = 'card-year';
      yearSpan.innerText = item.year ? `${item.year}` : '';
      const p = document.createElement('p');
      // short teaser: first 180 chars
      const teaser = story.text.length > 220 ? story.text.slice(0,220).trim() + '…' : story.text;
      p.innerText = teaser;
      const openBtn = document.createElement('button');
      openBtn.className = 'card-open';
      openBtn.innerText = 'Read full story';
      openBtn.addEventListener('click', ()=> openStory(item.key));

      card.appendChild(title);
      card.appendChild(yearSpan);
      card.appendChild(p);
      card.appendChild(openBtn);

      node.appendChild(card);
      node.appendChild(dot);
      node.appendChild(label);

      // clicking outside card closes any open card — handled globally

      track.appendChild(node);
    });

    // Close any open card when clicking elsewhere
    document.addEventListener('click', (e)=>{
      // if click outside any .timeline-node, hide any open card
      if(!e.target.closest || !e.target.closest('.timeline-node')){
        closeAllCards();
      }
    });

    // Show card above the node; hide others
    function showCardAbove(node){
      const alreadyOpen = node.classList.contains('active');
      closeAllCards();
      if(!alreadyOpen){
        node.classList.add('active');
        // scroll node into view nicely (center)
        node.scrollIntoView({ behavior:'smooth', inline:'center', block:'nearest' });
      }
    }
    function closeAllCards(){
      Array.from(document.querySelectorAll('.timeline-node.active')).forEach(n=> n.classList.remove('active'));
    }

    // allow keyboard arrow navigation among markers
    document.getElementById('timelineTrack').addEventListener('keydown', (e)=>{
      const focused = document.activeElement;
      if(!focused || !focused.classList.contains('timeline-node')) return;
      if(e.key === 'ArrowRight'){
        const next = focused.nextElementSibling;
        if(next){ next.focus(); next.scrollIntoView({ behavior:'smooth', inline:'center' }); }
      } else if(e.key === 'ArrowLeft'){
        const prev = focused.previousElementSibling;
        if(prev){ prev.focus(); prev.scrollIntoView({ behavior:'smooth', inline:'center' }); }
      } else if(e.key === 'Enter' || e.key === ' '){
        e.preventDefault(); showCardAbove(focused);
      }
    });

    /************************************************************************
     * Modal & Story functions (shared with Tree view)
     ************************************************************************/
    function escapeHtml(str){
      return String(str).replace(/[&<>"']/g, function(m){ return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]); });
    }

    function openStory(key){
      const s = stories[key];
      if(!s) return;
      const modal = document.getElementById('story-modal');
      const content = document.getElementById('story-content');
      content.innerHTML = '<h2>' + escapeHtml(s.title) + '</h2>' + (s.photo ? ('<img src="'+escapeHtml(s.photo)+'" class="story-photo" alt="'+escapeHtml(s.title)+'">') : '') + '<p>' + escapeHtml(s.text) + '</p>';
      modal.style.display = 'flex';
      modal.setAttribute('aria-hidden','false');
      // close any open timeline card
      closeAllCards();
    }
    function closeStory(){ const modal = document.getElementById('story-modal'); modal.style.display = 'none'; modal.setAttribute('aria-hidden','true'); }

    // close modal when clicking backdrop
    window.addEventListener('click', function(e){ const modal = document.getElementById('story-modal'); if(e.target === modal) closeStory(); });

    // keyboard: Esc to close modal or cards
    document.addEventListener('keydown', function(e){
      if(e.key === 'Escape') { closeStory(); closeAllCards(); }
    });

    /************************************************************************
     * Tabs (Tree <-> Timeline)
     ************************************************************************/
    const tabTree = document.getElementById('tabTree');
    const tabTimeline = document.getElementById('tabTimeline');
    const treePage = document.getElementById('treePage');
    const timelinePage = document.getElementById('timelinePage');

    tabTree.addEventListener('click', ()=> {
      tabTree.classList.add('active'); tabTimeline.classList.remove('active');
      treePage.style.display='block'; timelinePage.style.display='none';
      tabTree.setAttribute('aria-selected','true'); tabTimeline.setAttribute('aria-selected','false');
      // close timeline cards
      closeAllCards();
    });
    tabTimeline.addEventListener('click', ()=> {
      tabTimeline.classList.add('active'); tabTree.classList.remove('active');
      treePage.style.display='none'; timelinePage.style.display='block';
      tabTimeline.setAttribute('aria-selected','true'); tabTree.setAttribute('aria-selected','false');
      // ensure track is nicely centered on load
      setTimeout(()=> {
        const first = document.querySelector('.timeline-node');
        if(first) first.scrollIntoView({ inline:'center', behavior:'smooth' });
      }, 150);
    });

    // make timeline nodes focusable (for accessibility)
    Array.from(document.querySelectorAll('.timeline-node')).forEach(n => {
      n.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter') { showCardAbove(n); }
      });
    });

    // Prevent double-tap issues on mobile when opening cards
    (function preventDoubleTap(){
      let last = 0;
      document.addEventListener('touchend', function(e){
        const now = Date.now();
        if(now - last < 300) e.preventDefault();
        last = now;
      }, {passive:false});
    })();

  </script>
</body>
</html>
