/* Family Tree â€” Top-Down Layout (Detailed) */
:root{ --bg:#f3f6fb; --card:#fff; --accent:#1f6feb; --muted:#6b7280; --line:#cbd5e1; --container-width:1200px; }
*{box-sizing:border-box}
body{ margin:0; font-family: Inter, Roboto, Arial, sans-serif; background:var(--bg); color:#111827; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }
header{ background:linear-gradient(90deg,var(--accent),#174b93); color:white; padding:20px; text-align:center; }
header h1{margin:0;font-size:1.5rem}
header p{margin:6px 0 0;font-size:0.95rem;opacity:0.95}
.tree-container{ padding:20px; max-width:var(--container-width); margin:0 auto 80px; }

/* generation title */
.generation h2{ margin:8px 0 10px; color:#0f1724; font-size:1.05rem; }

/* CARDS VIEW styles (kept for compatibility) */
.tree { display:flex; gap:20px; justify-content:flex-start; flex-wrap:wrap; list-style:none; padding:12px 18px; margin:0; }
.person{ background:var(--card); border-radius:8px; padding:12px; min-width:220px; max-width:260px; box-shadow:0 8px 20px rgba(15,23,42,0.06); border:1px solid rgba(15,23,42,0.04); cursor:pointer; transition:transform .12s ease, box-shadow .12s ease; }
.person:hover{ transform:translateY(-6px); box-shadow:0 12px 30px rgba(15,23,42,0.09) }
.person .name{font-weight:700; font-size:15px; margin-bottom:6px}
.person .meta{font-size:13px;color:var(--muted)}
.person-card { background:var(--card); border-radius:8px; padding:12px; width:220px; box-shadow:0 8px 20px rgba(15,23,42,0.06); text-align:center; cursor:pointer; border:1px solid rgba(15,23,42,0.04); }
.person-card img { width:100%; height:140px; object-fit:cover; border-radius:6px; }

/* couple layout */
.couple{ display:flex; align-items:center; gap:8px; flex-direction:row; justify-content:center; padding:12px; }
.couple .name{ background:transparent; color:var(--accent); padding:6px 8px; border-radius:6px; }
.and{ font-weight:700; margin:0 8px; color:var(--muted) }
.children{ list-style:none; padding:12px; margin-top:12px; display:flex; gap:12px; justify-content:center; width:100% }

/* TOGGLE */
.view-toggle { text-align:center; margin:14px 0; }
.toggle-btn { background:#e5e7eb; border:none; padding:8px 14px; margin:0 4px; border-radius:6px; cursor:pointer; font-weight:600; }
.toggle-btn.active { background:var(--accent); color:white; }

/* TREE VIEW (single connected nested tree) */
.family-tree { width:100%; display:flex; justify-content:center; padding:18px 6px; }
.family-tree ul { list-style:none; margin:0; padding-left:0; display:block; }
.family-tree li { margin:0; padding:0 0 12px 0; position:relative; text-align:center; }

/* connectors */
.family-tree li::before, .family-tree li::after {
  content: '';
  position: absolute;
  left: 50%;
}
.family-tree li::before {
  border-left: 2px solid var(--line);
  top: -12px;
  height: 12px;
  transform: translateX(-50%);
}
.family-tree li::after {
  content: '';
}
.family-tree ul ul::before {
  content: '';
  display: block;
  width: 2px;
  height: 12px;
  background: var(--line);
  margin: 0 auto;
}

/* node box */
.node { display:inline-block; background:var(--card); border-radius:8px; padding:8px 10px; box-shadow:0 8px 20px rgba(15,23,42,0.06); border:1px solid rgba(15,23,42,0.04); cursor:pointer; position:relative; }
.node img { width:84px; height:84px; object-fit:cover; border-radius:8px; display:block; margin:0 auto 8px;}
.node .label { font-weight:700; font-size:14px; color:#0f1724; }
.node .sub { font-size:12px; color:var(--muted); margin-top:4px; }

/* couple inline styling */
.node .couple-inline { display:flex; align-items:center; gap:8px; justify-content:center; background:transparent; box-shadow:none; border:none; padding:0; }
.node .couple-inline .node { width:auto; padding:8px; }

/* modal */
.modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(2,6,23,0.45); z-index:60; padding:24px; }
.modal-card{ background:var(--card); border-radius:12px; padding:20px; max-width:720px; width:100%; box-shadow:0 12px 36px rgba(2,6,23,0.18); position:relative; text-align:left; max-height:90vh; overflow:auto; }
.modal-card img.story-photo{ max-width:220px; display:block; margin:10px 0 14px; border-radius:8px; }

/* responsive */
@media (max-width:980px){
  .tree{ flex-direction:column; gap:12px; align-items:center }
  .person{ min-width:92%; max-width:92% }
  .children{ flex-direction:row; flex-wrap:wrap; gap:10px }
  .node img{ width:72px; height:72px; }
}

/* map */
#family-map { height:600px; border-radius:12px; }

/* marker dot styles for Leaflet divIcons */
.marker-patton, .marker-kupfer, .marker-vaccaro, .marker-kirila, .marker-dean, .marker-unknown {
  display:block;
  border-radius:50%;
  width:18px;
  height:18px;
  border:2px solid #fff;
  box-shadow:0 2px 6px rgba(0,0,0,0.25);
}
.marker-patton{ background:#3b82f6; }
.marker-kupfer{ background:#22c55e; }
.marker-vaccaro{ background:#8b5cf6; }
.marker-kirila{ background:#06b6d4; }
.marker-dean{ background:#f97316; }
.marker-unknown{ background:#6b7280; }

/* ensure leaflet div icons ignore default border */
.leaflet-div-icon{ background:transparent; border:none !important; }
